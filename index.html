
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Heygen API Interface</title>
</head>
<body>
  <h1>Gerador de Vídeos - Heygen</h1>

  <label for="avatar">Escolha um avatar:</label>
  <select id="avatar"></select>

  <label for="voice">Escolha uma voz:</label>
  <select id="voice"></select>

  <label for="texto">Texto:</label>
  <textarea id="texto" rows="5" cols="50"></textarea>

  <button onclick="gerarVideo()">Gerar Vídeo</button>

  <pre id="resposta"></pre>

  <script>
    async function carregarAvatares() {
      const res = await fetch("/avatars");
      const json = await res.json();
      const select = document.getElementById("avatar");
      json.data.forEach(av => {
        const opt = document.createElement("option");
        opt.value = av.id;
        opt.text = av.name;
        select.add(opt);
      });
    }

    async function carregarVozes() {
      const res = await fetch("/voices");
      const json = await res.json();
      const select = document.getElementById("voice");
      json.data.forEach(voice => {
        const opt = document.createElement("option");
        opt.value = voice.id;
        opt.text = voice.name;
        select.add(opt);
      });
    }

    async function gerarVideo() {
      const avatar_id = document.getElementById("avatar").value;
      const voice_id = document.getElementById("voice").value;
      const texto = document.getElementById("texto").value;

      const res = await fetch("/gerar-video", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ avatar_id, voice_id, texto })
      });

      const json = await res.json();
      document.getElementById("resposta").textContent = JSON.stringify(json, null, 2);
    }

    carregarAvatares();
    carregarVozes();
  </script>
</body>
</html>
